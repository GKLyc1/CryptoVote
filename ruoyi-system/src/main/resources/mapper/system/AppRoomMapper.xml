<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.AppRoomMapper">
    
    <resultMap type="AppRoom" id="AppRoomResult">
        <result property="roomId"    column="room_id"    />
        <result property="userId"    column="user_id"    />
        <result property="roomPass"    column="room_pass"    />
        <result property="roomTitle"    column="room_title"    />
        <result property="roomUrl"    column="room_url"    />
        <result property="roomtime"    column="roomtime"    />
    </resultMap>

    <sql id="selectAppRoomVo">
        select room_id, user_id, room_pass, room_title, room_url, roomtime from app_room
    </sql>

    <select id="selectAppRoomList" parameterType="AppRoom" resultMap="AppRoomResult">
        <include refid="selectAppRoomVo"/>
        <where>  
            <if test="roomTitle != null  and roomTitle != ''"> and room_title = #{roomTitle}</if>
        </where>
    </select>
    
    <select id="selectAppRoomByRoomId" parameterType="Long" resultMap="AppRoomResult">
        <include refid="selectAppRoomVo"/>
        where room_id = #{roomId}
    </select>


    <select id="countroompass" parameterType="String" resultType="java.lang.Integer">
        select count(1) from app_room where room_id = {room_id} and room_pass = #{room_pass}
    </select>

    <select id="selectcountroomtitle" parameterType="String" resultType="java.lang.Integer">
        select count(1) from app_room where room_title = {room_title}
    </select>

    <select id="selectroomid" parameterType="String" resultType="java.lang.String">
        select room_id from app_room where room_title = {room_title}
    </select>
        
    <insert id="insertAppRoom" parameterType="AppRoom">
        insert into app_room
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="roomId != null">room_id,</if>
            <if test="userId != null">user_id,</if>
            <if test="roomPass != null">room_pass,</if>
            <if test="roomTitle != null">room_title,</if>
            <if test="roomUrl != null">room_url,</if>
            <if test="roomtime != null">roomtime,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="roomId != null">#{roomId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="roomPass != null">#{roomPass},</if>
            <if test="roomTitle != null">#{roomTitle},</if>
            <if test="roomUrl != null">#{roomUrl},</if>
            <if test="roomtime != null">#{roomtime},</if>
         </trim>
    </insert>

    <update id="updateAppRoom" parameterType="AppRoom">
        update app_room
        <trim prefix="SET" suffixOverrides=",">
            <if test="userId != null">user_id = #{userId},</if>
            <if test="roomPass != null">room_pass = #{roomPass},</if>
            <if test="roomTitle != null">room_title = #{roomTitle},</if>
            <if test="roomUrl != null">room_url = #{roomUrl},</if>
            <if test="roomtime != null">roomtime = #{roomtime},</if>
        </trim>
        where room_id = #{roomId}
    </update>

    <delete id="deleteAppRoomByRoomId" parameterType="Long">
        delete from app_room where room_id = #{roomId}
    </delete>

    <delete id="deleteAppRoomByRoomIds" parameterType="String">
        delete from app_room where room_id in 
        <foreach item="roomId" collection="array" open="(" separator="," close=")">
            #{roomId}
        </foreach>
    </delete>

</mapper>